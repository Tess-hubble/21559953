---
title: "Paged HTML Document"
author: "Tessa Hubble"
date: "July 2023"
# date: "`r Sys.Date()`"
bibliography: Tex/ref.bib       # Do not edit: Keep this naming convention and location.
output:
  pagedown::html_paged:
    # template: wp_paged.html
    # css: ['wp.css', 'wp-fonts.css', 'wp-page.css']
    css: ["Template/default-fonts-Texevier.css", "Template/default-page-Texevier.css", "Template/default-Texevier.css"]
    csl: Template/harvard-stellenbosch-university.csl # referencing format used.
    template: ["Template/paged-Texevier.html"]

    toc: true
    # change to true for a self-contained document, but it'll be a litte slower for Pandoc to render
    self_contained: TRUE
abstract: |
    This report will provide some statistics on the evolution of COVID-19. This data has been kindly provided by Our World in Data. 

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message=FALSE, warning=FALSE)

library(tidyverse)

Loc <- "C:\\Users\\tessa\\OneDrive\\Desktop\\Masters 2023\\Data science\\Exam\\21559953\\Question_1\\data"
deaths_df <- read_csv("C:\\Users\\tessa\\OneDrive\\Desktop\\Masters 2023\\Data science\\Exam\\21559953\\Question_1\\data\\Deaths_by_cause.csv")
covid_df <- read_csv("C:\\Users\\tessa\\OneDrive\\Desktop\\Masters 2023\\Data science\\Exam\\21559953\\Question_1\\data\\covid_data_description.csv")
owid_df <- read_csv("C:\\Users\\tessa\\OneDrive\\Desktop\\Masters 2023\\Data science\\Exam\\21559953\\Question_1\\data\\owid-covid-data.csv")




 

 
```

\newpage

# Introduction {-}

# need to thank owid

Figure 1 below shows how monthly new cases of COVID-19 varie across continents. Throughout the period 2020 - 2022, Europe leads with the highest number of cases per month. Europe experiences peaks in the last quarter of 2020 with over 500 000 new cases a month and in the last quarter of 2021 with just under 3.5 million cases a month. No other continent comes remotely close to these figures. Despite these monthly figures, new cases per million in Africa and South America remain below 300 000 new cases a month in this period. Africa's highest peak is about 265 000 new cases per month at the beginning of 2022. 

```{r }
source("code/plots.R")
cases_continent <- plotter(owid_df, evolution_covid$new_cases_mil, "New cases per million across continents", "New cases (millions)")
cases_continent

```

Figure 2 shows that deaths too were concentrated within Europe. Once again, Africa presents a small conrtributor to monthly deaths throughout the period. 

# include something about missing data?

```{r}
source("code/plots.R")
deaths_continent <- plotter(owid_df, evolution_covid$new_deaths_mil, "Deaths per million across continents", "New deaths per million")
deaths_continent

```

Figure 3 shows average monthly excess mortality across continents. Excess mortality is the percentage difference between the reported number of deaths and the projected number of deaths for the same period based on previous years. This metric shows that South Africa America experienced a positive average excess mortality over the period in question. Africa's excess mortality remains less than 0.03 percent when positive. 

```{r}
source("code/plots.R")
excess_deaths_continent <- plotter(owid_df, evolution_covid$excess_mort, "Average excess mortality across continents", "Excess mortality (%)")
excess_deaths_continent

```

COVID-19 vulnerabilities 

## include smokers? cardiovasc?

```{r}
source("code/plots.R")
vulnerability_df <- vulnerability_transformations(owid_df)
aged_vulnerability <- density_plotter(vulnerability_df, vulnerability_df$Aged_population, "Total deaths by proportion of population aged over 70", "Proportion of population over 70" )
aged_vulnerability

```


```{r}
source("code/plots.R")
pov_vulnerability <- density_plotter(vulnerability_df, vulnerability_df$poverty, "Total deaths by proportion of population in extreme poverty", "Proportion of population in extreme poverty" )
pov_vulnerability
```

```{r}
source("code/plots.R")
vulnerability_df <- vulnerability_transformations(owid_df)
diabetes_vulnerability <- density_plotter(vulnerability_df, vulnerability_df$diabetes, "Total deaths by diabetes prevalence", "Diabetes prevalence" )
diabetes_vulnerability
```

Hospital admissions

```{r}
source("code/plots.R")
Europe_hosp <- hospital_resp("Europe", "Admissions and number of patients in Europe")
Europe_hosp

North_America_hosp <- hospital_resp("North America", "Admissions and number of patients in North America")
North_America_hosp

Africa_hosp <- hospital_resp("Africa", "Admissions and number of patients in Africa")
Africa_hosp

Asia_hosp <- hospital_resp("Asia", "Admissions and number of patients in Asia")
Asia_hosp
```

